{% extends 'base.html' %}
{% block title %}S-Parameters App{% endblock %}
{% block content %}
<h1 class="mb-4">S-Parameter Application</h1>
<form action="{{ url_for('user.submit_task', task_type='sparams') }}" method="post" class="mt-3" enctype="multipart/form-data">
  <div class="mb-3">
    <label class="form-label">Touchstone File</label>
    <input type="file" name="file" class="form-control" required>
    <div class="mt-3">
      <label class="form-label">Plot Type</label>
      <select name="plot" id="plot" class="form-select">
        <option value="xy" selected>XY Plot</option>
        <option value="smith">Smith Chart</option>
      </select>
    </div>
    <div class="mt-3" id="xy-options">
      <label class="form-label">Parameter</label>
      <select name="parameter" class="form-select">
        <option value="S" selected>S</option>
        <option value="Y">Y</option>
        <option value="Z">Z</option>
      </select>
      <label class="form-label mt-2">Operation</label>
      <select name="operation" class="form-select">
        <option value="db" selected>dB</option>
        <option value="real">Real</option>
        <option value="imag">Imag</option>
        <option value="mag">Mag</option>
        <option value="phase">Phase</option>
      </select>
    </div>
    <script>
      const plotSel = document.getElementById('plot');
      const xyOpt = document.getElementById('xy-options');
      function toggleOpts(){
        xyOpt.style.display = plotSel.value === 'xy' ? 'block' : 'none';
      }
      plotSel.addEventListener('change', toggleOpts);
      toggleOpts();
    </script>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>
{% endblock %}
